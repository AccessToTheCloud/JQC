<p id="notice"><%= notice %></p>
<h1>Applications</h1>
<%= link_to "View CSV", applications_path({format: :csv}.merge(params.permit(:type, :start_date, :end_date, :search_text))) %>
<div class="container">
  <div class="row justify-content-start">
    <div class="col-lg">
      <div class="input-group" onkeypress="if(event.keyCode == 13){search()}">
        <select class="form-select w-1" id="select_type" >
          <option value="" selected>Select Type:</option>
          <% @types.each do |type| %>
            <option value=<%=type%>><%=type%></option>
          <% end %>
        </select>
        <span class="input-group-text">From</span>
        <input class="form-control w-15" type="date" id="start_date" min="1970-01-01" max="2000-13-13"=>
        <span class="input-group-text">To</span>
        <input class="form-control w-15" type="date" id="end_date" min="1970-01-01" max="2000-13-13"=>
        <span class="input-group-text">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
        </span>
        <input class="form-control w-25" id="search_text" type="text"=>
        <button class="btn btn-primary" type="button" onclick="search()">Search</button>
        <button class="btn btn-outline-secondary" type="button" onclick="clearSearchParams()">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
<table>
  <thead>
    <tr>
      <th>Reference No</th>
      <th>Location</th>
      <th>Suburb</th>
      <th>Description</th>
      <th>Contact</th>
      <th>Owner</th>
      <th>Applicant</th>
      <th>Council</th>
      <th>DateCreated</th>
      <th>DA No</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @applications.each do |application| %>
      <tr>
        <td><%= application.reference_number %></td>
        <td><%= application.street_name %></td>
        <td><%= application.suburb.try(:display_name) %></td>
        <td><%= application.description %></td>
        <td><%= application.client.try(:client_name) %></td>
        <td><%= application.owner.try(:client_name) %></td>
        <td><%= application.applicant.try(:client_name) %></td>
        <td><%= application.council.try(:name)%></td>
        <td><%= application.created_at %></td>
        <td><%= application.development_application_number %></td>
        <td><%= link_to 'Show', application %></td>
        <td><%= link_to 'Edit', edit_application_path(application) %></td>
        <td><%= link_to 'Destroy', application, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%== pagy_nav(@pagy) %>
<br>
<%= link_to 'New Application', new_application_path %>
<%= javascript_pack_tag 'applications_index_page' %>
